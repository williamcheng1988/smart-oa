<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>项 目 收 入 发 票</title>
	<link rel="stylesheet" type="text/css" href="../../themes/default/easyui.css">
	<link rel="stylesheet" type="text/css" href="../../themes/icon.css">
	<script type="text/javascript" src="../../jquery.min.js"></script>
	<script type="text/javascript" src="../../jquery.easyui.min.js"></script>
</head>
<body>
<form id="Form1" action="../../form!handelRequest.do" method="post" class="easyui-form" data-options="novalidate:true">
<table class="xf-table" cellspacing="0" cellpadding="0" border="1" width="100%" align="center" style="border-collapse: collapse;font-size: 12px;">
	<tbody>
		

			<tr id="xf-g-0-2">
				<td width="20%" class="xf-cell-right xf-cell-bottom xf-cell-left"
					id="xf-g-0-2-0"><div class="xf-handler">
						<label
							style="display: block; text-align:center; color: black; margin-bottom: 0px;">项目成员</label>
					</div></td>
				<td width="20%" class="xf-cell-right xf-cell-bottom" id="xf-g-0-2-1"
					colspan="3" rowspan="1">
					<div class="xf-handler UserSelection">
						<select class="easyui-combobox" id="DetailItem_xmid-test"
							name="xf_f_test">
								<option value="">-- 请选择项目 --</option>
								<option value="78">0-其他业务-其他角色</option>
								<option value="61">艾特航模-财务顾问-财务顾问</option>
								<option value="39">爱视眼科-财务顾问-财务顾问</option>
								<option value="149">办事处大连-其他业务-其他角色</option>
								<option value="169">办事处广州-自有投资-其他角色</option>
								<option value="165">宝航建设1-自有投资-其他角色</option>
								<option value="119">暴风网际-其他业务-其他角色</option>
								<option value="143">北京华卓-资本管理-其他角色</option>
								<option value="166">北京精典-资本管理-其他角色</option>
								<option value="174">北京鲸鲨5-其他业务-财务顾问</option>
								<option value="27">博创机械-自有投资-其他角色</option>
						</select>
					</div></td>
					
					<td colspan="2">
						
					</td>
			</tr>
			<tr id="xf-g-0-2">
				<td width="20%" class="xf-cell-right xf-cell-bottom xf-cell-left"
					id="xf-g-0-2-0">
						</td>
				<td width="20%" class="xf-cell-right xf-cell-bottom" id="xf-g-0-2-1"
					colspan="3" rowspan="1">
					<div class="xf-handler UserSelection">
						
					</div></td>
					
					<td colspan="2">
						<div class="xf-handler">
							<a href="#" class="easyui-linkbutton copyWidget-add" title="增加" iconCls="icon-add"></a>
							<a href="#" class="easyui-linkbutton copyWidget-remove" title="删除" iconCls="icon-remove"></a>
							<input id="aaa" value=""/>
							<input id="copy-number" type="hidden" name="xf_f_copy-number" value="1"/>
						</div>
					</td>
			</tr>
			
		<tr id="xf-g-10">
			<td nowrap="" align="center" class="tasktd1">1收款单位</td>
			<td class="tasktd2"><input class="easyui-textbox" id="DetailItem_skdw" name="xf_f_skdw">&nbsp;</td>
			<td nowrap="" align="center" class="tasktd1">收款银行</td>
			<td class="tasktd2"><input class="easyui-textbox" id="DetailItem_skyh" name="xf_f_skyh">&nbsp;</td>
			<td nowrap="" align="center" class="tasktd1">收款帐号</td>
			<td class="tasktd2"></td>
		</tr>
		
	</tbody>
</table>

					<div align="center">
						<a href="javascript:submitForm()" class="easyui-linkbutton">&nbsp;保&nbsp;存&nbsp;</a>&nbsp;&nbsp;
				    	<a href="javascript:clearForm()" class="easyui-linkbutton">&nbsp;重&nbsp;置&nbsp;</a>&nbsp;&nbsp;
				    	<a href="javascript:closeTab()" class="easyui-linkbutton">&nbsp;关&nbsp;闭&nbsp;</a>&nbsp;&nbsp;
					</div>
	</form>
<script type="text/javascript">
function submitForm() {
	$('#Form1').form(
			'submit',
			{
				onSubmit : function() {
					var validate = $(this).form('enableValidation').form('validate');
					if (validate) {
						$("#formTemplateId").val($("#templateId").val());
						$('#ui_mask').css('display', 'block');
						$('#ui_mask_msg').css('display', 'block');
					}
					return validate;
				},
				success : function(result) {
				},
				error : function() {
					alert("系统异常，请稍后再试...");
				}
			});
}

	$(function(){
		$('.copyWidget-add').click(function(){
			
			
			var copyNumFiled = $(this).closest('.xf-handler').find('#copy-number');
			var copyNum = copyNumFiled.val();
			var newCopyNum = ++copyNum;
			
			var idAttr = $('#aaa').val();
			var targetTr = $('[name="'+idAttr+'"]').closest('tr[id^="xf-g"]');
			if(!targetTr){return false;}
			var html = '<tr id="xf-g-'+newCopyNum+'" line_num="copy-number-'+newCopyNum+'">'+targetTr.html()+'</tr>';
			
			$(targetTr).after(html);
			//alert(html);
			
			$('[line_num="copy-number-'+newCopyNum+'"]').find('[name],[textboxname]').each(function(){
				var attrName = $(this).attr('name');
				var attrTextboxname = $(this).attr('textboxname');
				//var name = attrName?attrName:attrTextboxname;
				//alert(name);
				if(attrName){$(this).attr('name',attrName+newCopyNum);}
				
				if(attrTextboxname){$(this).attr('textboxname',attrTextboxname+newCopyNum);}
			});
			
			//jQuery.parser.parse($('[line_num="copy-number-'+newCopyNum+'"]'));
			
			copyNumFiled.val(newCopyNum);
			
		});
		$('.copyWidget-remove').click(function(){
			
			var targetTr = $('[line_num^="copy-number-"]:last');
			if(!targetTr){return false;}
			targetTr.remove();
			//alert(targetTr.html());
			
			
			var copyNumFiled = $(this).closest('.xf-handler').find('#copy-number');
			var copyNum = copyNumFiled.val();
			copyNumFiled.val(--copyNum);
			
			
			//$("[line_num=\""+line_no+"\"]").remove();
		});
	})
</script>

</body>
</html>