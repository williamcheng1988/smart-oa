var xf_f_name_prefix="xf_f_";var xf_f_flow_view;var UserSelection_new_inner_html="";xf={};xf.field={};xf.$=function(a){return document.getElementById(a)};xf.addClass=function(b,a){if((" "+b.className).indexOf(" "+a)==-1){b.className+=" "+a}};xf.removeClass=function(d,c){var a=d.className;while(a.indexOf(" "+c)!=-1){var b=a.indexOf(" "+c);a=a.substring(0,b)+a.substring(b+c.length+1)}while(a.indexOf(c+" ")!=-1){var b=a.indexOf(c+" ");a=a.substring(0,b)+a.substring(b+c.length+1)}d.className=a};xf.getTarget=function(d){var b=window.event?window.event:d;var a=b.clientX;var f=b.clientY;var c=b.srcElement?b.srcElement:b.target;return c};xf.getHandler=function(a){while(a){if(a.className&&a.className=="xf-handler"){return a}a=a.parentNode}return null};xf.getPosition=function(c){var b=window.event?window.event:c;var a=b.clientX;var d=b.clientY;return{x:a,y:d}};xf.insertAfter=function(c,a){var b=a.parentNode;if(b.lastChild==a){b.appendChild(c)}else{b.insertBefore(c,a.nextSibling)}};xf.createField=function(d,f,g,b,e){var c=document.createElement("label");c.innerHTML=d+":";c.className="control-label";var a=document.createElement("input");a.type="text";a.value=f;a.onblur=function(){if(d==xf.field.attrName()){if(/[@#\$%\^&\*]+/g.test(this.value)){jQuery.messager.show({title:"\u63d0\u793a\uff01",msg:"name\u5c5e\u6027\u4e0d\u80fd\u542b\u6709[@#$%^&*\\]\u7b49\u7279\u6b8a\u5b57\u7b26\uff01",showType:"slide",style:{right:"",top:document.body.scrollTop+document.documentElement.scrollTop,bottom:""}});this.value=f;this.focus();return false}if(jQuery.trim(this.value).length==0){jQuery.messager.show({title:"\u63d0\u793a\uff01",msg:"name\u5c5e\u6027\u4e0d\u80fd\u4e3a\u7a7a\uff01",showType:"slide",style:{right:"",top:document.body.scrollTop+document.documentElement.scrollTop,bottom:""}});this.value=f;this.focus()}try{for(var j=0;j<xform.sections.length;j++){var n=xform.sections[j];if(n.fieldMap){var m=false;for(var h in n.fieldMap){var l=n.fieldMap[h];if(b.parentId==h){continue}if(this.value==l.name){m=true;break}}if(m){jQuery.messager.show({title:"\u63d0\u793a\uff01",msg:'name\u5c5e\u6027"'+this.value+'"\u91cd\u590d\uff01',showType:"slide",style:{right:"",top:document.body.scrollTop+document.documentElement.scrollTop,bottom:""}});this.value=f;this.focus();return false}n.fieldMap[b.parentId].name=this.value}}}catch(k){console.log(k)}}g.call(b,this.value)};e.appendChild(c);e.appendChild(a)};xf.createSelect=function(f,h,k,l,a){var d=document.createElement("label");d.innerHTML=f+":";d.className="control-label";var g=document.createElement("select");g.style.width="150px";g.onchange=function(){k.call(l,this.value,a)};try{g.options[0]=new Option("\u8bf7\u9009\u62e9","");if(selectionData&&selectionData.length>0){for(var b=0;b<selectionData.length;b++){var j=selectionData[b];g.options[b+1]=new Option(j.name,j.value);if(j.value==h){g.options[b+1].selected=true}}}}catch(c){console.log(c)}a.appendChild(d);a.appendChild(g)};xf.createBooleanField=function(d,f,g,b,e){var c=document.createElement("label");c.className="checkbox control-group";var a=document.createElement("input");a.type="checkbox";a.value="true";if(f){a.checked=true}a.onclick=function(){g.call(b,this.checked)};a.style.marginLeft="0px";c.appendChild(a);c.appendChild(document.createTextNode(" "+d));e.appendChild(c)};xf.Xform=function(a){this.id=a;this.mode="EDIT";this.sections=[];this.sed=0;this.proxy=new xf.Proxy();this.fieldFactory=new xf.field.FieldFactory()};xf.Xform.prototype.addSection=function(a){a.id=this.getId();a.xform=this;this.sections.push(a)};xf.Xform.prototype.initEvents=function(){var a=this;document.onmousedown=function(b){a.mouseDown(b)};document.onmousemove=function(b){a.mouseMove(b)};document.onmouseup=function(b){a.mouseUp(b)};document.onmouseover=function(b){};document.onmouseout=function(b){}};xf.Xform.prototype.mouseDown=function(f){var d=xf.getTarget(f);var a=xf.getHandler(d);if(a){f.preventDefault()}if(this.mode=="EDIT"){if(d.className=="xf-pallete"){this.request={type:"add",fieldType:d.title}}else{if(a){var c=this.findSection(f);if(c){var b=c.findField(d);if(b){this.request={type:"move",section:c,field:b}}}}}}else{if(this.mode=="MERGE"){var c=this.findSection(f);if(c){c.mergeStart(f);this.request={status:"merge"}}}}var c=this.findSection(f);if(c){c.selectSomething(f)}};xf.Xform.prototype.mouseMove=function(c){if(!this.request){return}if(this.mode=="EDIT"){var a=xf.getPosition(c);this.proxy.move(a.x+5,a.y+5)}else{if(this.mode=="MERGE"){var b=this.findSection(c);if(b){b.mergeMove(c)}}}};xf.Xform.prototype.mouseUp=function(c){if(!this.request){return}if(this.mode=="EDIT"){this.proxy.hide();var b=xf.getTarget(c);var a=this.findSection(c);if(a){if(this.request.type=="add"){a.addField(this.request,b)}else{if(this.request.type=="move"){a.moveTo(this.request.field,b)}}}this.request=null}else{if(this.mode=="MERGE"){var a=this.findSection(c);if(a){a.mergeEnd(c)}this.request=null}}};xf.Xform.prototype.mouseOver=function(b){if(this.mode=="EDIT"){var a=this.findSection(b);if(a){a.mouseOver(b)}}};xf.Xform.prototype.mouseOut=function(b){if(this.mode=="EDIT"){var a=this.findSection(b);if(a){a.mouseOut(b)}}};xf.Xform.prototype.findSection=function(f){var d=xf.getTarget(f);var b=d;while(true){if(b.className!=null&&b.className.indexOf("xf-section")!=-1){for(var a=0;a<this.sections.length;a++){var c=this.sections[a];if(c.id==b.id){return c}}}b=b.parentNode;if(!b){return null}}};xf.Xform.prototype.getId=function(){return"xf-g-"+(this.sed++)};xf.Xform.prototype.addRow=function(){var a=this.sections[1];a.addRow()};xf.Xform.prototype.addColumn=function(){var a=this.sections[1];a.addColumn()};xf.Xform.prototype.render=function(){for(var a=0;a<this.sections.length;a++){var b=this.sections[a];b.render()}};xf.Xform.prototype.doExport=function(){var c='{"sections":[';for(var a=0;a<this.sections.length;a++){var b=this.sections[a].doExport();c+=b;if(a!=this.sections.length-1){c+=","}}c+="]}";return c};xf.Xform.prototype.doImport=function(text){var o=eval("("+text+")");xf.$(this.id).innerHTML="";this.sections=[];for(var i=0;i<o.sections.length;i++){var sectionData=o.sections[i];switch(sectionData.type){case"text":if(arguments[1]!="flow"){var section=new xf.TextSection(sectionData.tag,sectionData.text);xform.addSection(section)}break;case"grid":var section=new xf.GridSection(sectionData.row,sectionData.col);xform.addSection(section);if(arguments.length>2){section.doImport(sectionData,arguments[1],arguments[2])}else{section.doImport(sectionData)}break}}this.render()};xf.Xform.prototype.doMerge=function(){for(var a=0;a<this.sections.length;a++){this.sections[a].merge()}this.doCleanSelectedItem()};xf.Xform.prototype.doCleanSelectedItem=function(){console.log("doCleanSelectedItem");for(var a=0;a<this.sections.length;a++){this.sections[a].doCleanSelectedItem()}};xf.Xform.prototype.doSplit=function(){for(var a=0;a<this.sections.length;a++){this.sections[a].split()}};xf.Xform.prototype.setValue=function(b){for(var a=0;a<this.sections.length;a++){var c=this.sections[a];c.setValue(b)}};xf.TextSection=function(a,b){this.tag=a;this.text=b};xf.TextSection.prototype.render=function(){var b=document.createElement("div");b.id=this.id;b.className="xf-section";b.innerHTML="<"+this.tag+' style="text-align:center;">'+this.text+"</"+this.tag+">";var a=xf.$(this.xform.id);a.appendChild(b)};xf.TextSection.prototype.addField=function(a,b){};xf.TextSection.prototype.doExport=function(){return'{"type":"text","tag":"'+this.tag+'","text":"'+this.text+'"}'};xf.TextSection.prototype.selectSomething=function(a){this.xform.selectionListener.select(this)};xf.TextSection.prototype.viewForm=function(a){a.innerHTML="";xf.createField(xf.field.attrText(),this.text,this.updateText,this,a)};xf.TextSection.prototype.updateText=function(b){this.text=b;var a=xf.$(this.id);a.innerHTML="<"+this.tag+' style="text-align:center;">'+this.text+"</"+this.tag+">"};xf.TextSection.prototype.mergeStart=function(a){};xf.TextSection.prototype.mergeMove=function(a){};xf.TextSection.prototype.mergeEnd=function(a){};xf.TextSection.prototype.mouseOver=function(a){};xf.TextSection.prototype.mouseOut=function(a){};xf.TextSection.prototype.merge=function(){};xf.TextSection.prototype.doCleanSelectedItem=function(){};xf.TextSection.prototype.split=function(){};xf.TextSection.prototype.setValue=function(a){};xf.GridSection=function(b,a){this.row=b;this.col=a;this.fieldMap={};this.mergeMap={};this.selectedItems=[];this.startCell=[];this.endCell=[]};xf.GridSection.prototype.findCell=function(a){while(a){if(a.className&&a.className.indexOf("xf-cell")!=-1){return a}a=a.parentNode}return false};xf.GridSection.prototype.merge=function(){if(this.selectedItems.length==0){return false}var e=this.minRow;var b=this.minCol;var t=this.maxRow;var s=this.maxCol;var g=this.selectedItems;for(var w=0;w<g.length;w++){var c=g[w];var z=this.getPosition(c);var o=z.row;var p=z.col;var k=z.row+(z.height-1);var y=z.col+(z.width-1);if(e>o){e=o}if(t<k){t=k}if(b>p){b=p}if(s<y){s=y}}var m=this.id+"-"+e+"-"+b;var c=xf.$(m);if(!c){return false}var h=1+s-b;var f=1+t-e;c.setAttribute("colspan",h);c.setAttribute("rowspan",f);for(var w=e;w<(t+1);w++){for(var u=b;u<(s+1);u++){var r=this.id+"-"+w+"-"+u;var q=xf.$(r);if(q&&q.id!=c.id){q.parentNode.removeChild(q)}}}for(var A in this.mergeMap){var x=this.mergeMap[A];var n=x.minRow;var l=x.minCol;var d=x.maxRow;var a=x.maxCol;if(e<=n&&b<=l&&t>=d&&s>=a){delete this.mergeMap[A]}}this.mergeMap[e+"-"+b]={minRow:e,minCol:b,maxRow:t,maxCol:s};this.selectedItems=[];var v=document.getElementsByTagName("TD");for(var w=0;w<v.length;w++){xf.removeClass(v[w],"active")}};xf.GridSection.prototype.doCleanSelectedItem=function(){var b=document.getElementsByTagName("TD");for(var a=0;a<b.length;a++){xf.removeClass(b[a],"active")}this.selectedItems=[]};xf.GridSection.prototype.split=function(){if(this.selectedItems.length==0){return false}var a=this.selectedItems[0];var h=this.getPosition(a);var k=h.row;var m=h.col;if(h.width==1&&h.height==1){return false}a.setAttribute("colspan",1);a.setAttribute("rowspan",1);for(var g=0;g<h.width;g++){for(var e=0;e<h.height;e++){if(g==0&&e==0){continue}var b=h.row+e;var d=h.col+g;var c=document.createElement("td");c.innerHTML="<div>&nbsp;</div>";c.id=this.id+"-"+b+"-"+d;c.className="xf-cell xf-cell-right xf-cell-bottom";if(d==0){c.className+=" xf-cell-left"}if(b==0){c.className+=" xf-cell-top"}var n=xf.$(this.id+"-"+b+"-"+(d-1));if(n==null){var l=xf.$(this.id+"-"+b);if(l.children.length==0){l.appendChild(c)}else{l.insertBefore(c,l.firstChild)}}else{xf.insertAfter(c,n)}}}delete this.mergeMap[k+"-"+m];this.selectedItems=[];var f=document.getElementsByTagName("TD");for(var g=0;g<f.length;g++){xf.removeClass(f[g],"active")}};xf.GridSection.prototype.render=function(){var c=document.createElement("div");c.id=this.id;c.className="xf-section";var l='<table class="xf-table" cellspacing="0" cellpadding="5" width="100%" align="center" style="border-collapse: collapse;font-size: 12px;"><tbody>';for(var k=0;k<this.row;k++){var f=this.id+"-"+k;l+='<tr id="'+f+'">';for(var h=0;h<this.col;h++){var b=f+"-"+h;var g="xf-cell-right xf-cell-bottom";if(k==0){g+=" xf-cell-top"}if(h==0){g+=" xf-cell-left"}l+='<td id="'+b+'" class="'+g+'" width="'+(100/this.col)+'%">&nbsp;</td>'}l+="</tr>"}l+="</tbody></table>";c.innerHTML=l;var a=xf.$(this.xform.id);a.appendChild(c);for(var n in this.fieldMap){var m=this.fieldMap[n];m.render()}for(var n in this.mergeMap){var d=this.mergeMap[n];this.minRow=d.minRow;this.minCol=d.minCol;this.maxRow=d.maxRow;this.maxCol=d.maxCol;for(var k=this.minRow;k<=this.maxRow;k++){for(var h=this.minCol;h<=this.maxCol;h++){var e=xf.$(this.id+"-"+k+"-"+h);this.selectedItems.push(e)}}this.merge()}};xf.GridSection.prototype.addField=function(c,e){var b=this.findCell(e);if(b){var a=this.xform.fieldFactory;var d=a.create(c.fieldType,b);d.render();this.fieldMap[b.id]=d}};xf.GridSection.prototype.doExport=function(){var h='{"type":"grid","row":"'+this.row+'","col":"'+this.col+'","merge":[';var b=false;for(var e in this.mergeMap){b=true;var a=e;var d=this.mergeMap[a];h+='{"startId":"'+a+'","minRow":'+d.minRow+',"minCol":'+d.minCol+',"maxRow":'+d.maxRow+',"maxCol":'+d.maxCol+"},"}if(b){h=h.substring(0,h.length-1)}var g=false;h+='],"fields":[';for(var e in this.fieldMap){g=true;var c=e;var f=this.fieldMap[c];h+=f.doExport()+","}if(g){h=h.substring(0,h.length-1)}h+="]}";return h};xf.GridSection.prototype.addRow=function(){var a=this.findTbody();var c=document.createElement("tr");c.id=this.id+"-"+this.row;a.appendChild(c);for(var b=0;b<this.col;b++){var d=document.createElement("td");d.id=c.id+"-"+b;d.className="xf-cell-right xf-cell-bottom";if(b==0){d.className+=" xf-cell-left"}d.width=(100/this.col)+"%";d.innerHTML="&nbsp;";c.appendChild(d)}this.row++};xf.GridSection.prototype.addColumn=function(){var b=this.findTbody();if(!b){return false}this.col++;for(var c=0;c<b.childNodes.length;c++){var d=b.childNodes[c];var e=d.childNodes[d.childNodes.length-1];var g=e.id.split("-");var a=parseInt(g[4]);var f=document.createElement("td");f.id=d.id+"-"+(a+1);f.className="xf-cell-right xf-cell-top xf-cell-bottom";console.log("width:"+e.width);f.width=e.width;f.innerHTML="&nbsp;";d.appendChild(f)}};xf.GridSection.prototype.findTbody=function(){var c=xf.$(this.id);for(var b=0;b<c.childNodes.length;b++){var a=c.childNodes[b];if(a.tagName=="TABLE"){c=a}}for(var b=0;b<c.childNodes.length;b++){var a=c.childNodes[b];if(a.tagName=="TBODY"){c=a}}return c};xf.GridSection.prototype.selectSomething=function(d){var c=xf.getTarget(d);var a=this.findCell(c);var b=this.fieldMap[a.id];this.xform.selectionListener.select(b)};xf.GridSection.prototype.doImport=function(e){this.fieldMap={};for(var d=0;d<e.fields.length;d++){var b=e.fields[d];var f=this.xform.fieldFactory.create(b.type);f.parentId=this.id+"-"+b.row+"-"+b.col;for(var c in b){if(arguments.length>2&&arguments[2]=="input-form-template"){if(c=="name"&&b[c].indexOf(xf_f_name_prefix)>=0){f[c]=b[c].substring(xf_f_name_prefix.length);continue}}f[c]=b[c]}this.fieldMap[f.parentId]=f}this.mergeMap={};if(e.merge){for(var d=0;d<e.merge.length;d++){var a=e.merge[d];this.mergeMap[a.startId]=a}}};xf.GridSection.prototype.getPosition=function(a){if(!a||!a.id){return false}var c=a.id.split("-");var b={};b.row=parseInt(c[3]);b.col=parseInt(c[4]);b.width=parseInt(a.colSpan);if(b.width==0){b.width=1}b.height=parseInt(a.rowSpan);if(b.height==0){b.height=1}return b};xf.GridSection.prototype.mergeStart=function(d){this.doCleanSelectedItem();var c=xf.getTarget(d);var a=this.findCell(c);if(!a){return}for(var b=0;b<this.selectedItems.length;b++){xf.removeClass(this.selectedItems[b],"active")}xf.addClass(a,"active");this.status="DRAG";this.startCell=a;this.selectedItems.push(a)};xf.GridSection.prototype.mergeMove=function(s){if(this.status=="DRAG"){var u=xf.getTarget(s);var a=this.findCell(u);if(!a){return}this.selectedItems.push(a);var w=a;var g=this.startCell;var h=this.getPosition(g);var m=this.getPosition(w);if(g.id==w.id){return}var d=Math.min(h.row,m.row);var b=Math.min(h.col,m.col);var p=Math.max(h.row+(h.height-1),m.row+(m.height-1));var o=Math.max(h.col+(h.width-1),m.col+(m.width-1));var f=this.selectedItems;for(var r=0;r<f.length;r++){var c=f[r];var v=this.getPosition(c);var l=v.row;var n=v.col;var k=v.row+(v.height-1);var t=v.col+(v.width-1);if(d>l){d=l}if(p<k){p=k}if(b>n){b=n}if(o<t){o=t}}this.selectedItems=[];this.minRow=d;this.minCol=b;this.maxRow=p;this.maxCol=o;for(var r=d;r<=p;r++){for(var q=b;q<=o;q++){var c=xf.$(this.id+"-"+r+"-"+q);if(c){xf.addClass(c,"active");this.selectedItems.push(c)}}}}};xf.GridSection.prototype.mergeEnd=function(a){if(this.status=="DRAG"){this.status="DROP"}};xf.GridSection.prototype.mouseOver=function(c){var b=xf.getTarget(c);var a=this.findCell(b);if(!a){return}xf.addClass(a,"over")};xf.GridSection.prototype.mouseOut=function(c){var b=xf.getTarget(c);var a=this.findCell(b);if(!a){return}xf.removeClass(a,"over")};xf.GridSection.prototype.findField=function(b){var a=this.findCell(b);return this.fieldMap[a.id]};xf.GridSection.prototype.moveTo=function(f,e){var c=this.findCell(e);var a=this.getPosition(c);if(f.row==a.row&&f.col==a.col){return}var b=this.id+"-"+f.row+"-"+f.col;delete this.fieldMap[b];xf.$(f.parentId).innerHTML="";var g=a.row;var d=a.col;f.row=g;f.col=d;var b=this.id+"-"+f.row+"-"+f.col;this.fieldMap[this.id+"-"+f.row+"-"+f.col]=f;f.parentId=c.id;f.render()};xf.GridSection.prototype.setValue=function(c){for(var a in this.fieldMap){var d=this.fieldMap[a];var b=c[d.name];if(b){d.setValue(b)}}};xf.Proxy=function(){this.id="xf-proxy";this.status="uninitialized";this.init()};xf.Proxy.prototype.init=function(){if(this.status=="uninitialized"){var a=document.createElement("div");a.id=this.id;a.innerHTML="&nbsp;";a.style.position="absolute";a.style.top=-100+"px";a.style.left=-100+"px";a.style.zIndex=10000;a.style.width="50px";a.style.backgroundColor="#DDDDDD";a.style.border="dotted 1px gray";document.body.appendChild(a);this.status="initialized"}};xf.Proxy.prototype.move=function(a,c){var b=xf.$(this.id);b.style.top=c+"px";b.style.left=a+"px"};xf.Proxy.prototype.hide=function(){this.move(-100,-100)};xf.field.attrText=function(){return"\u6807\u9898"};xf.field.attrLabel=function(){return"\u6807\u7b7e\u540d"};xf.field.attrName=function(){return"\u63a7\u4ef6\u540d\u79f0"};xf.field.attrAlias=function(){return"\u62a5\u8868\u5217\u540d"};xf.field.attrMinVal=function(){return"\u6700\u5c0f\u503c"};xf.field.attrMaxVal=function(){return"\u6700\u5927\u503c"};xf.field.attrPrecision=function(){return"\u5c0f\u6570\u4f4d\u7cbe\u5ea6"};xf.field.attrItems=function(){return"\u6570\u636e\u9009\u9879"};xf.field.attrDic=function(){return"\u6570\u636e\u5b57\u5178"};xf.field.attrResources=function(){return"\u503c\u6e90"};xf.field.attrDataType=function(){return"\u6570\u636e\u7c7b\u578b"};xf.field.attrRequired=function(){return"\u5fc5\u8f93\u9879"};xf.field.attrReadOnly=function(){return"\u53ea\u8bfb\u9879"};xf.field.attrReportFlag=function(){return"\u62a5\u8868\u6807\u5fd7"};xf.field.attrTxtAlign=function(){return"\u6c34\u5e73\u4f4d\u7f6e"};xf.field.attrTxtColor=function(){return"\u5b57\u4f53\u989c\u8272"};xf.field.FieldFactory=function(){this.fieldTypeMap={label:xf.field.Label,textfield:xf.field.TextField,numberbox:xf.field.Numberbox,calculator:xf.field.Calculator,upperdigit:xf.field.UpperDigit,password:xf.field.Password,textarea:xf.field.TextArea,select:xf.field.Select,radio:xf.field.Radio,checkbox:xf.field.Checkbox,fileupload:xf.field.FileUpload,datepicker:xf.field.DatePicker,userpicker:xf.field.UserPicker,userselection:xf.field.UserSelection,proselection:xf.field.ProSelection}};xf.field.FieldFactory.prototype.create=function(c,a){var b=this.fieldTypeMap[c];var d=new b(a);return d};xf.field.Label=function(a){if(!a){return}var c=a.id;var b=c.split("-");this.parentId=c;this.row=b[3];this.col=b[4];this.align="center";this.color="black";this.name="label-"+this.row+"-"+this.col;this.text="text"};xf.field.Label.prototype.render=function(){this.updateText(this.text)};xf.field.Label.prototype.doExport=function(){return'{"type":"label","row":'+this.row+',"col":'+this.col+',"align":"'+this.align+'","color":"'+this.color+'","text":"'+this.text+'"}'};xf.field.Label.prototype.viewForm=function(c){c.innerHTML="";xf.createField(xf.field.attrLabel(),this.text,this.updateText,this,c);var b=new Array();b[0]={name:"\u5c45\u5de6",value:"left"};b[1]={name:"\u5c45\u4e2d",value:"center"};b[2]={name:"\u5c45\u53f3",value:"right"};xf.createSelect(xf.field.attrTxtAlign(),this.align,this.updateTextAlign,this,c,b);var a=new Array();a[0]={name:"\u9ed1\u8272",value:"black"};a[1]={name:"\u7ea2\u8272",value:"red"};a[2]={name:"\u6a59\u8272",value:"orange"};a[3]={name:"\u9ec4\u8272",value:"yellow"};a[4]={name:"\u7eff\u8272",value:"green"};a[5]={name:"\u9752\u8272",value:"cyan"};a[6]={name:"\u84dd\u8272",value:"blue"};a[7]={name:"\u7d2b\u8272",value:"purple"};xf.createSelect(xf.field.attrTxtColor(),this.color,this.updateTextColor,this,c,a)};xf.field.Label.prototype.updateText=function(b){this.text=b;var a=xf.$(this.parentId);if(!a){return false}a.innerHTML='<div class="xf-handler"><label style="display:block;text-align:'+(this.align?this.align:"center")+";color:"+(this.color?this.color:"black")+';margin-bottom:0px;">'+this.text+"</label></div>"};xf.field.Label.prototype.updateTextAlign=function(b){this.align=b;var a=xf.$(this.parentId);if(!a){return false}a.innerHTML='<div class="xf-handler"><label style="display:block;text-align:'+(this.align?this.align:"center")+";color:"+(this.color?this.color:"black")+';margin-bottom:0px;">'+this.text+"</label></div>"};xf.field.Label.prototype.updateTextColor=function(b){this.color=b;var a=xf.$(this.parentId);if(!a){return false}a.innerHTML='<div class="xf-handler"><label style="display:block;text-align:'+(this.align?this.align:"center")+";color:"+(this.color?this.color:"black")+';margin-bottom:0px;">'+this.text+"</label></div>"};xf.field.TextField=function(a){if(!a){return}var c=a.id;var b=c.split("-");this.parentId=c;this.row=b[3];this.col=b[4];this.name="textfield-"+this.row+"-"+this.col;this.required=false;this.readOnly=false;this.reportFlag=false;this.alias=this.name};xf.field.TextField.prototype.render=function(){this.updateName(this.name)};xf.field.TextField.prototype.doExport=function(){return'{"type":"textfield","row":'+this.row+',"col":'+this.col+',"name":"'+xf_f_name_prefix+this.name+'","alias":"'+this.alias+'","required":'+this.required+',"readOnly":'+this.readOnly+',"reportFlag":'+this.reportFlag+"}"};xf.field.TextField.prototype.viewForm=function(a){a.innerHTML="";xf.createField(xf.field.attrName(),this.name,this.updateName,this,a);xf.createField(xf.field.attrAlias(),this.alias,this.updateAlias,this,a);xf.createBooleanField(xf.field.attrRequired(),this.required,this.updateRequired,this,a);xf.createBooleanField(xf.field.attrReadOnly(),this.readOnly,this.updateReadOnly,this,a);xf.createBooleanField(xf.field.attrReportFlag(),this.reportFlag,this.updateReportFlag,this,a)};xf.field.TextField.prototype.updateName=function(a){this.name=a;this.display()};xf.field.TextField.prototype.display=function(){var a=xf.$(this.parentId);if(!a){return false}var b='<div class="xf-handler">';if(xf_f_flow_view){b+=(this.value?this.value:"")}else{b+='<input type="text" class="easyui-textbox" name="'+this.name+'" id="'+this.name+'" alias="'+this.alias+'" '+(this.readOnly?"readOnly":"")+' value="'+(this.value?this.value:"")+'" '+(this.required?' data-options="required:true" ':"")+"></input>"}b+="</div>";a.innerHTML=b};xf.field.TextField.prototype.updateAlias=function(a){this.alias=a};xf.field.TextField.prototype.updateRequired=function(a){this.required=a};xf.field.TextField.prototype.updateReadOnly=function(a){this.readOnly=a;this.display()};xf.field.TextField.prototype.updateReportFlag=function(a){this.reportFlag=a};xf.field.TextField.prototype.setValue=function(b){this.value=b;this.updateName(this.name);if(this.readOnly){var a=xf.$(this.parentId);if(!a){return false}a.innerHTML=b}};xf.field.Numberbox=function(a){if(!a){return}var c=a.id;var b=c.split("-");this.parentId=c;this.row=b[3];this.col=b[4];this.name="numberbox-"+this.row+"-"+this.col;this.required=false;this.readOnly=false;this.reportFlag=false;this.alias=this.name;this.minVal=0;this.maxVal=9999999999;this.precision=2};xf.field.Numberbox.prototype.render=function(){this.updateName(this.name)};xf.field.Numberbox.prototype.doExport=function(){return'{"type":"numberbox","row":'+this.row+',"col":'+this.col+',"name":"'+xf_f_name_prefix+this.name+'","alias":"'+this.alias+'","minVal":'+this.minVal+',"maxVal":'+this.maxVal+',"precision":'+this.precision+',"required":'+this.required+',"readOnly":'+this.readOnly+',"reportFlag":'+this.reportFlag+"}"};xf.field.Numberbox.prototype.viewForm=function(a){a.innerHTML="";xf.createField(xf.field.attrName(),this.name,this.updateName,this,a);xf.createField(xf.field.attrAlias(),this.alias,this.updateAlias,this,a);xf.createField(xf.field.attrMinVal(),this.minVal,this.updateMinVal,this,a);xf.createField(xf.field.attrMaxVal(),this.maxVal,this.updateMaxVal,this,a);xf.createField(xf.field.attrPrecision(),this.precision,this.updatePrecision,this,a);xf.createBooleanField(xf.field.attrRequired(),this.required,this.updateRequired,this,a);xf.createBooleanField(xf.field.attrReadOnly(),this.readOnly,this.updateReadOnly,this,a);xf.createBooleanField(xf.field.attrReportFlag(),this.reportFlag,this.updateReportFlag,this,a)};xf.field.Numberbox.prototype.updateName=function(a){this.name=a;this.display()};xf.field.Numberbox.prototype.display=function(){var a=xf.$(this.parentId);if(!a){return false}var b='<div class="xf-handler">';if(xf_f_flow_view){b+=(this.value?this.value:"")}else{b+='<input type="text" class="easyui-numberbox" name="'+this.name+'" id="'+this.name+'" alias="'+this.alias+'" '+(this.readOnly?"readOnly":"")+' value="'+(this.value?this.value:"")+'"  data-options="min:'+this.minVal+",max:"+this.maxVal+",precision:"+this.precision+",groupSeparator:','"+(this.required?',required:true"':'"')+"></input>"}b+="</div>";a.innerHTML=b};xf.field.Numberbox.prototype.updateAlias=function(a){this.alias=a};xf.field.Numberbox.prototype.updateMinVal=function(a){this.minVal=a};xf.field.Numberbox.prototype.updateMaxVal=function(a){this.maxVal=a};xf.field.Numberbox.prototype.updatePrecision=function(a){this.precision=a};xf.field.Numberbox.prototype.updateRequired=function(a){this.required=a};xf.field.Numberbox.prototype.updateReadOnly=function(a){this.readOnly=a;this.display()};xf.field.Numberbox.prototype.updateReportFlag=function(a){this.reportFlag=a};xf.field.Numberbox.prototype.setValue=function(b){this.value=b;this.updateName(this.name);if(this.readOnly){var a=xf.$(this.parentId);if(!a){return false}a.innerHTML=b}};xf.field.Calculator=function(a){if(!a){return}var c=a.id;var b=c.split("-");this.parentId=c;this.row=b[3];this.col=b[4];this.name="calculator-"+this.row+"-"+this.col;this.required=false;this.readOnly=false;this.reportFlag=false;this.alias=this.name;this.resources="";this.dataType="text"};xf.field.Calculator.prototype.render=function(){this.updateName(this.name)};xf.field.Calculator.prototype.doExport=function(){return'{"type":"calculator","row":'+this.row+',"col":'+this.col+',"name":"'+xf_f_name_prefix+this.name+'","alias":"'+this.alias+'","resources":"'+this.resources+'","dataType":"'+this.dataType+'","required":'+this.required+',"readOnly":'+this.readOnly+',"reportFlag":'+this.reportFlag+"}"};xf.field.Calculator.prototype.viewForm=function(b){b.innerHTML="";var a=new Array();a[0]={name:"\u6587\u672c",value:"text"};a[1]={name:"\u6570\u503c",value:"number"};xf.createField(xf.field.attrName(),this.name,this.updateName,this,b);xf.createField(xf.field.attrAlias(),this.alias,this.updateAlias,this,b);xf.createField(xf.field.attrResources(),this.resources,this.updateResources,this,b);xf.createSelect(xf.field.attrDataType(),this.dataType,this.updateDataType,this,b,a);xf.createBooleanField(xf.field.attrRequired(),this.required,this.updateRequired,this,b);xf.createBooleanField(xf.field.attrReadOnly(),this.readOnly,this.updateReadOnly,this,b);xf.createBooleanField(xf.field.attrReportFlag(),this.reportFlag,this.updateReportFlag,this,b)};xf.field.Calculator.prototype.updateName=function(a){this.name=a;this.display()};xf.field.Calculator.prototype.display=function(){var a=xf.$(this.parentId);if(!a){return false}var b='<div class="xf-handler">';if(xf_f_flow_view){b+=(this.value?this.value:"")}else{b+='<input type="text" class="easyui-'+((this.dataType&&this.dataType!="")?this.dataType:"text")+'box calculator" name="'+this.name+'" id="'+this.name+'" alias="'+this.alias+'" resources="'+this.resources+'" '+(this.readOnly?"readOnly":"")+' value="'+(this.value?this.value:"")+'" style="margin-bottom:0px;cursor:move;">'}b+="</div>";a.innerHTML=b};xf.field.Calculator.prototype.updateAlias=function(a){this.alias=a};xf.field.Calculator.prototype.updateResources=function(a){this.resources=a};xf.field.Calculator.prototype.updateDataType=function(a){this.dataType=a};xf.field.Calculator.prototype.updateRequired=function(a){this.required=a};xf.field.Calculator.prototype.updateReadOnly=function(a){this.readOnly=a;this.display()};xf.field.Calculator.prototype.updateReportFlag=function(a){this.reportFlag=a};xf.field.Calculator.prototype.setValue=function(b){this.value=b;this.updateName(this.name);if(this.readOnly){var a=xf.$(this.parentId);if(!a){return false}a.innerHTML=b}};xf.field.UpperDigit=function(a){if(!a){return}var c=a.id;var b=c.split("-");this.parentId=c;this.row=b[3];this.col=b[4];this.name="upperdigit-"+this.row+"-"+this.col;this.required=false;this.readOnly=false;this.reportFlag=false;this.alias=this.name;this.resources=""};xf.field.UpperDigit.prototype.render=function(){this.updateName(this.name)};xf.field.UpperDigit.prototype.doExport=function(){return'{"type":"upperdigit","row":'+this.row+',"col":'+this.col+',"name":"'+xf_f_name_prefix+this.name+'","alias":"'+this.alias+'","resources":"'+this.resources+'","required":'+this.required+',"readOnly":'+this.readOnly+',"reportFlag":'+this.reportFlag+"}"};xf.field.UpperDigit.prototype.viewForm=function(a){a.innerHTML="";xf.createField(xf.field.attrName(),this.name,this.updateName,this,a);xf.createField(xf.field.attrAlias(),this.alias,this.updateAlias,this,a);xf.createField(xf.field.attrResources(),this.resources,this.updateResources,this,a);xf.createBooleanField(xf.field.attrRequired(),this.required,this.updateRequired,this,a);xf.createBooleanField(xf.field.attrReadOnly(),this.readOnly,this.updateReadOnly,this,a);xf.createBooleanField(xf.field.attrReportFlag(),this.reportFlag,this.updateReportFlag,this,a)};xf.field.UpperDigit.prototype.updateName=function(a){this.name=a;this.display()};xf.field.UpperDigit.prototype.display=function(){var a=xf.$(this.parentId);if(!a){return false}var b='<div class="xf-handler">';if(xf_f_flow_view){b+=(this.value?this.value:"")}else{b+='<input type="text" class="easyui-textbox upperDigit" name="'+this.name+'" id="'+this.name+'" alias="'+this.alias+'" resources="'+this.resources+'" '+(this.readOnly?"readOnly":"")+' value="'+(this.value?this.value:"\u96f6\u5143\u6574")+'" style="margin-bottom:0px;cursor:move;">'}b+="</div>";a.innerHTML=b};xf.field.UpperDigit.prototype.updateAlias=function(a){this.alias=a};xf.field.UpperDigit.prototype.updateResources=function(a){this.resources=a};xf.field.UpperDigit.prototype.updateRequired=function(a){this.required=a};xf.field.UpperDigit.prototype.updateReadOnly=function(a){this.readOnly=a;this.display()};xf.field.UpperDigit.prototype.updateReportFlag=function(a){this.reportFlag=a};xf.field.UpperDigit.prototype.setValue=function(b){this.value=b;this.updateName(this.name);if(this.readOnly){var a=xf.$(this.parentId);if(!a){return false}a.innerHTML=b}};xf.field.Password=function(a){if(!a){return}var c=a.id;var b=c.split("-");this.parentId=c;this.row=b[3];this.col=b[4];this.name="password-"+this.row+"-"+this.col;this.required=false;this.readOnly=false};xf.field.Password.prototype.render=function(){this.updateName(this.name)};xf.field.Password.prototype.doExport=function(){return'{"type":"password","row":'+this.row+',"col":'+this.col+',"name":"'+xf_f_name_prefix+this.name+'","required":'+this.required+',"readOnly":'+this.readOnly+"}"};xf.field.Password.prototype.viewForm=function(a){a.innerHTML="";xf.createField(xf.field.attrName(),this.name,this.updateName,this,a);xf.createBooleanField(xf.field.attrRequired(),this.required,this.updateRequired,this,a);xf.createBooleanField(xf.field.attrReadOnly(),this.readOnly,this.updateReadOnly,this,a)};xf.field.Password.prototype.updateName=function(a){this.name=a;this.display()};xf.field.Password.prototype.display=function(){var a=xf.$(this.parentId);if(!a){return false}a.innerHTML='<div class="xf-handler"><input type="password" name="'+this.name+'" '+(this.readOnly?"readOnly":"")+' style="margin-bottom:0px;cursor:move;"></div>'};xf.field.Password.prototype.updateRequired=function(a){this.required=a};xf.field.Password.prototype.updateReadOnly=function(a){this.readOnly=a};xf.field.Password.prototype.setValue=function(a){};xf.field.TextArea=function(a){if(!a){return}var c=a.id;var b=c.split("-");this.parentId=c;this.row=b[3];this.col=b[4];this.name="textarea-"+this.row+"-"+this.col;this.required=false;this.readOnly=false;this.reportFlag=false;this.alias=this.name};xf.field.TextArea.prototype.render=function(){this.updateName(this.name)};xf.field.TextArea.prototype.doExport=function(){return'{"type":"textarea","row":'+this.row+',"col":'+this.col+',"name":"'+xf_f_name_prefix+this.name+'","alias":"'+this.alias+'","required":'+this.required+',"readOnly":'+this.readOnly+',"reportFlag":'+this.reportFlag+"}"};xf.field.TextArea.prototype.viewForm=function(a){a.innerHTML="";xf.createField(xf.field.attrName(),this.name,this.updateName,this,a);xf.createField(xf.field.attrAlias(),this.alias,this.updateAlias,this,a);xf.createBooleanField(xf.field.attrRequired(),this.required,this.updateRequired,this,a);xf.createBooleanField(xf.field.attrReadOnly(),this.readOnly,this.updateReadOnly,this,a);xf.createBooleanField(xf.field.attrReportFlag(),this.reportFlag,this.updateReportFlag,this,a)};xf.field.TextArea.prototype.updateName=function(a){this.name=a;this.display()};xf.field.TextArea.prototype.display=function(){var a=xf.$(this.parentId);if(!a){return false}var b='<div class="xf-handler">';if(xf_f_flow_view){b+=this.value?this.value:""}else{b+='<input class="easyui-textbox" name="'+this.name+'" id="'+this.name+'" data-options="multiline:true" style="height:60px;width:258px;" '+(this.readOnly?"readOnly":"")+' name="'+this.name+'"  value="'+(this.value?this.value:"")+'" '+(this.required?" required ":"")+"></input>"}b+="</div>";a.innerHTML=b};xf.field.TextArea.prototype.updateAlias=function(a){this.alias=a};xf.field.TextArea.prototype.updateRequired=function(a){this.required=a};xf.field.TextArea.prototype.updateReadOnly=function(a){this.readOnly=a;this.display()};xf.field.TextArea.prototype.updateReportFlag=function(a){this.reportFlag=a};xf.field.TextArea.prototype.setValue=function(b){this.value=b;this.updateName(this.name);if(this.readOnly){var a=xf.$(this.parentId);if(!a){return false}a.innerHTML=b}};xf.field.Select=function(a){if(!a){return}var c=a.id;var b=c.split("-");this.parentId=c;this.row=b[3];this.col=b[4];this.name="select-"+this.row+"-"+this.col;this.items="";this.required=false;this.readOnly=false;this.reportFlag=false;this.alias=this.name;this.dic="";this.dicsArr=[]};xf.field.Select.prototype.render=function(){this.updateName(this.name)};xf.field.Select.prototype.doExport=function(){return'{"type":"select","row":'+this.row+',"col":'+this.col+',"name":"'+xf_f_name_prefix+this.name+'","alias":"'+this.alias+'","items":"'+this.items+'","dic":"'+this.dic+'","required":'+this.required+',"readOnly":'+this.readOnly+',"reportFlag":'+this.reportFlag+"}"};xf.field.Select.prototype.viewForm=function(a){a.innerHTML="";xf.createField(xf.field.attrName(),this.name,this.updateName,this,a);xf.createField(xf.field.attrAlias(),this.alias,this.updateAlias,this,a);xf.createSelect(xf.field.attrDic(),this.dic,this.updateDic,this,a,xf_f_select_dicData);xf.createField(xf.field.attrItems(),this.items,this.updateItems,this,a);xf.createBooleanField(xf.field.attrRequired(),this.required,this.updateRequired,this,a);xf.createBooleanField(xf.field.attrReadOnly(),this.readOnly,this.updateReadOnly,this,a);xf.createBooleanField(xf.field.attrReportFlag(),this.reportFlag,this.updateReportFlag,this,a)};xf.field.Select.prototype.updateName=function(a){this.name=a;this.updateItems(this.items)};xf.field.Select.prototype.updateDic=function(a){this.dic=a};xf.field.Select.prototype.updateItems=function(e){this.items=e;var a=xf.$(this.parentId);if(!a){return false}var c='<div class="xf-handler">';if(xf_f_flow_view){c+=(this.value?this.value:"")}else{c+='<select class="easyui-combobox" name="'+this.name+'" alias="'+this.alias+'" '+(this.readOnly?"disabled":"")+(((!this.items||this.items.length==0)&&(this.dic&&this.dic!=""))?("data-options=\"url:'formTemplate!listDictionarys.do?dicKey="+this.dic+"',method:'get',valueField:'name',textField:'name',panelHeight:'auto',editable:false\""):"")+(this.required?" required ":"")+' style="width:135px">';if(this.items){var f=this.items.split(",");for(var b=0;b<f.length;b++){var d=f[b];c+='<option value="'+d+'" '+(this.value==d?"selected":"")+">"+d+"</option>"}}c+="</select>"}c+="</div>";a.innerHTML=c};xf.field.Select.prototype.updateAlias=function(a){this.alias=a};xf.field.Select.prototype.updateRequired=function(a){this.required=a};xf.field.Select.prototype.updateReadOnly=function(a){this.readOnly=a;this.updateItems(this.items)};xf.field.Select.prototype.updateReportFlag=function(a){this.reportFlag=a};xf.field.Select.prototype.setValue=function(b){this.value=b;this.updateName(this.name);if(this.readOnly){var a=xf.$(this.parentId);if(!a){return false}a.innerHTML=b}};xf.field.Radio=function(a){if(!a){return}var c=a.id;var b=c.split("-");this.parentId=c;this.row=b[3];this.col=b[4];this.name="radio-"+this.row+"-"+this.col;this.items="";this.required=false;this.readOnly=false;this.reportFlag=false;this.alias=this.name};xf.field.Radio.prototype.render=function(){this.updateName(this.name)};xf.field.Radio.prototype.doExport=function(){return'{"type":"radio","row":'+this.row+',"col":'+this.col+',"name":"'+xf_f_name_prefix+this.name+'","alias":"'+this.alias+'","items":"'+this.items+'","required":'+this.required+',"readOnly":'+this.readOnly+',"reportFlag":'+this.reportFlag+"}"};xf.field.Radio.prototype.viewForm=function(a){a.innerHTML="";xf.createField(xf.field.attrName(),this.name,this.updateName,this,a);xf.createField(xf.field.attrAlias(),this.alias,this.updateAlias,this,a);xf.createField(xf.field.attrItems(),this.items,this.updateItems,this,a);xf.createBooleanField(xf.field.attrRequired(),this.required,this.updateRequired,this,a);xf.createBooleanField(xf.field.attrReadOnly(),this.readOnly,this.updateReadOnly,this,a);xf.createBooleanField(xf.field.attrReportFlag(),this.reportFlag,this.updateReportFlag,this,a)};xf.field.Radio.prototype.updateName=function(a){this.name=a;this.updateItems(this.items)};xf.field.Radio.prototype.updateItems=function(e){this.items=e;var a=xf.$(this.parentId);if(!a){return false}var c='<div class="xf-handler'+(xf_f_flow_view?"":" textbox")+'" style="padding-right:3px;">';if(xf_f_flow_view){c+=(this.value?this.value:"")}else{var f=this.items.split(",");for(var b=0;b<f.length;b++){var d=f[b];c+='<input type="radio" name="'+this.name+'" alias="'+this.alias+'" value="'+d+'" '+(this.readOnly?"disabled":"")+" "+(this.value==d?"checked":"")+(this.required?" required ":"")+">";c+=d}}c+="</div>";a.innerHTML=c};xf.field.Radio.prototype.updateAlias=function(a){this.alias=a};xf.field.Radio.prototype.updateRequired=function(a){this.required=a};xf.field.Radio.prototype.updateReadOnly=function(a){this.readOnly=a;this.updateItems(this.items)};xf.field.Radio.prototype.updateReportFlag=function(a){this.reportFlag=a};xf.field.Radio.prototype.setValue=function(b){this.value=b;this.updateItems(this.items);if(this.readOnly){var a=xf.$(this.parentId);if(!a){return false}a.innerHTML=b}};xf.field.Checkbox=function(a){if(!a){return}var c=a.id;var b=c.split("-");this.parentId=c;this.row=b[3];this.col=b[4];this.name="checkbox-"+this.row+"-"+this.col;this.items="";this.required=false;this.readOnly=false;this.reportFlag=false;this.alias=this.name};xf.field.Checkbox.prototype.render=function(){this.updateName(this.name)};xf.field.Checkbox.prototype.doExport=function(){return'{"type":"checkbox","row":'+this.row+',"col":'+this.col+',"name":"'+xf_f_name_prefix+this.name+'","alias":"'+this.alias+'","items":"'+this.items+'","required":'+this.required+',"readOnly":'+this.readOnly+',"reportFlag":'+this.reportFlag+"}"};xf.field.Checkbox.prototype.viewForm=function(a){a.innerHTML="";xf.createField(xf.field.attrName(),this.name,this.updateName,this,a);xf.createField(xf.field.attrAlias(),this.alias,this.updateAlias,this,a);xf.createField(xf.field.attrItems(),this.items,this.updateItems,this,a);xf.createBooleanField(xf.field.attrRequired(),this.required,this.updateRequired,this,a);xf.createBooleanField(xf.field.attrReadOnly(),this.readOnly,this.updateReadOnly,this,a);xf.createBooleanField(xf.field.attrReportFlag(),this.reportFlag,this.updateReportFlag,this,a)};xf.field.Checkbox.prototype.updateName=function(a){this.name=a;this.updateItems(this.items)};xf.field.Checkbox.prototype.updateItems=function(g){this.items=g;var a=xf.$(this.parentId);if(!a){return false}var e='<div class="xf-handler'+(xf_f_flow_view?"":" textbox")+'" style="padding-right:3px;">';if(xf_f_flow_view){e+=(this.value?this.value:"")}else{var h=this.items.split(",");for(var d=0;d<h.length;d++){var f=h[d];var c=false;if(this.value){for(var b=0;b<this.value.length;b++){if(this.value[b]==f){c=true;break}}}e+='<input type="checkbox" name="'+this.name+'" alias="'+this.alias+'" value="'+f+'" '+(this.readOnly?"disabled":"")+" "+(c?"checked":"")+(this.required?" required ":"")+">";e+=f}}e+="</div>";a.innerHTML=e};xf.field.Checkbox.prototype.updateAlias=function(a){this.alias=a};xf.field.Checkbox.prototype.updateRequired=function(a){this.required=a};xf.field.Checkbox.prototype.updateReadOnly=function(a){this.readOnly=a;this.updateItems(this.items)};xf.field.Checkbox.prototype.updateReportFlag=function(a){this.reportFlag=a};xf.field.Checkbox.prototype.setValue=function(b){this.value=b;this.updateName(this.name);if(this.readOnly){var a=xf.$(this.parentId);if(!a){return false}a.innerHTML=b}};xf.field.DatePicker=function(a){if(!a){return}var c=a.id;var b=c.split("-");this.parentId=c;this.row=b[3];this.col=b[4];this.name="datepicker-"+this.row+"-"+this.col;this.required=false;this.readOnly=false;this.reportFlag=false;this.alias=this.name};xf.field.DatePicker.prototype.render=function(){this.updateName(this.name)};xf.field.DatePicker.prototype.doExport=function(){return'{"type":"datepicker","row":'+this.row+',"col":'+this.col+',"name":"'+xf_f_name_prefix+this.name+'","alias":"'+this.alias+'","required":'+this.required+',"readOnly":'+this.readOnly+',"reportFlag":'+this.reportFlag+"}"};xf.field.DatePicker.prototype.viewForm=function(a){a.innerHTML="";xf.createField(xf.field.attrName(),this.name,this.updateName,this,a);xf.createField(xf.field.attrAlias(),this.alias,this.updateAlias,this,a);xf.createBooleanField(xf.field.attrRequired(),this.required,this.updateRequired,this,a);xf.createBooleanField(xf.field.attrReadOnly(),this.readOnly,this.updateReadOnly,this,a);xf.createBooleanField(xf.field.attrReportFlag(),this.reportFlag,this.updateReportFlag,this,a)};xf.field.DatePicker.prototype.updateName=function(a){this.name=a;this.display()};xf.field.DatePicker.prototype.display=function(){var a=xf.$(this.parentId);if(!a){return false}var b='<div class="xf-handler">';if(xf_f_flow_view){b+=(this.value?this.value:"")}else{b+='<input class="easyui-datebox" data-options="editable:false" name="'+this.name+'" '+(this.readOnly?'readOnly="" ':"")+' value="'+(this.value?this.value:"")+'"'+(this.required?"required ":"")+"></input>"}b+="</div>";a.innerHTML=b};xf.field.DatePicker.prototype.updateAlias=function(a){this.alias=a};xf.field.DatePicker.prototype.updateRequired=function(a){this.required=a};xf.field.DatePicker.prototype.updateReadOnly=function(a){this.readOnly=a;this.display()};xf.field.DatePicker.prototype.updateReportFlag=function(a){this.reportFlag=a};xf.field.DatePicker.prototype.setValue=function(b){this.value=b;this.updateName(this.name);if(this.readOnly){var a=xf.$(this.parentId);if(!a){return false}a.innerHTML=b}};xf.field.UserPicker=function(a){if(!a){return}var c=a.id;var b=c.split("-");this.parentId=c;this.row=b[3];this.col=b[4];this.name="userpicker-"+this.row+"-"+this.col;this.required=false;this.readOnly=false;this.reportFlag=false;this.alias=this.name};xf.field.UserPicker.prototype.render=function(){this.updateName(this.name)};xf.field.UserPicker.prototype.doExport=function(){return'{"type":"userpicker","row":'+this.row+',"col":'+this.col+',"name":"'+xf_f_name_prefix+this.name+'","alias":"'+this.alias+'","required":'+this.required+',"readOnly":'+this.readOnly+',"reportFlag":'+this.reportFlag+"}"};xf.field.UserPicker.prototype.viewForm=function(a){a.innerHTML="";xf.createField(xf.field.attrName(),this.name,this.updateName,this,a);xf.createField(xf.field.attrAlias(),this.alias,this.updateAlias,this,a);xf.createBooleanField(xf.field.attrRequired(),this.required,this.updateRequired,this,a);xf.createBooleanField(xf.field.attrReadOnly(),this.readOnly,this.updateReadOnly,this,a);xf.createBooleanField(xf.field.attrReportFlag(),this.reportFlag,this.updateReportFlag,this,a)};xf.field.UserPicker.prototype.updateName=function(a){this.name=a;this.display()};xf.field.UserPicker.prototype.display=function(){var a=xf.$(this.parentId);if(!a){return false}var b='<div class="xf-handler">';if(xf_f_flow_view){b+=(this.value?this.value:"")}else{b+='<select class="easyui-combobox" style="width:135px" name="'+this.name+"\" data-options=\"url:'formTemplate!fetchUsers.do',method:'get',valueField:'name',textField:'name',panelHeight:'auto',panelWidth:'auto',multiple:true\""+(this.required?"required ":"")+(this.readOnly?"disabled":"")+">";b+="</select>"}b+="</div>";a.innerHTML=b};xf.field.UserPicker.prototype.updateAlias=function(a){this.alias=a};xf.field.UserPicker.prototype.updateRequired=function(a){this.required=a};xf.field.UserPicker.prototype.updateReadOnly=function(a){this.readOnly=a;this.display()};xf.field.UserPicker.prototype.updateReportFlag=function(a){this.reportFlag=a};xf.field.UserPicker.prototype.setValue=function(b){this.value=b;this.updateName(this.name);if(this.readOnly){var a=xf.$(this.parentId);if(!a){return false}a.innerHTML=b}};xf.field.UserSelection=function(a){if(!a){return}var c=a.id;var b=c.split("-");this.parentId=c;this.row=b[3];this.col=b[4];this.name="userselection-"+this.row+"-"+this.col;this.alias=this.name;this.required=false;this.readOnly=false;this.reportFlag=false;this.collections=[];this.rolesArr=[];this.usersArr=[]};xf.field.UserSelection.prototype.render=function(){this.updateName(this.name)};xf.field.UserSelection.prototype.doExport=function(){var a='{"type":"userselection","row":'+this.row+',"col":'+this.col+',"required":'+this.required+',"readOnly":'+this.readOnly+',"reportFlag":'+this.reportFlag+',"name":"'+xf_f_name_prefix+this.name+'","alias":"'+this.alias+'","collections":[';a+='{"type":"select","name":"'+xf_f_name_prefix+this.name+"~"+xf_f_name_prefix+'us_r~@0"},{"type":"userpicker","name":"'+xf_f_name_prefix+this.name+"~"+xf_f_name_prefix+'us_u~@1"}';a+="]}";return a};xf.field.UserSelection.prototype.viewForm=function(a){a.innerHTML="";xf.createField(xf.field.attrName(),this.name,this.updateName,this,a);xf.createField(xf.field.attrAlias(),this.alias,this.updateAlias,this,a);xf.createBooleanField(xf.field.attrRequired(),this.required,this.updateRequired,this,a);xf.createBooleanField(xf.field.attrReadOnly(),this.readOnly,this.updateReadOnly,this,a);xf.createBooleanField(xf.field.attrReportFlag(),this.reportFlag,this.updateReportFlag,this,a)};xf.field.UserSelection.prototype.updateName=function(a){this.name=a;this.display()};xf.field.UserSelection.prototype.display=function(){var a=xf.$(this.parentId);if(!a){return false}var b;if(this.usersArr&&this.usersArr.length>0){b="[";for(var f=0;f<this.usersArr.length;f++){var g=this.usersArr[f];b+='{"name":"'+g.name+'","value":"'+g.value+'"}';if(f!=this.usersArr.length-1){b+=","}}b+="]";usersjsonStr_tmp=b}var e='<div class="xf-handler UserSelection" style="margin:10px 0px">';if(!xf_f_flow_view){var c="";c+='<select class="easyui-combobox userSelectionCom" style="width:135px" name="'+this.name+"~"+xf_f_name_prefix+'us_r~@0" id="'+this.name+"~"+xf_f_name_prefix+"us_r~@0\" data-options=\"url:'formTemplate!fetchRoles.do',method:'get',valueField:'name',textField:'name',panelHeight:'auto'\""+(this.required?"required ":"")+(this.readOnly?"disabled":"")+">";c+="</select>";c+='<select class="easyui-combobox userSelectionCom" style="width:135px" name="'+this.name+"~"+xf_f_name_prefix+'us_u~@1" id="'+this.name+"~"+xf_f_name_prefix+"us_u~@1\" data-options=\"url:'formTemplate!fetchUsers.do',method:'get',valueField:'name',textField:'name',panelHeight:'auto',panelWidth:'auto',multiple:true\""+(this.required?"required ":"")+(this.readOnly?"disabled":"")+" reportFlag="+this.reportFlag+" >";c+="</select>";c+='<span class="add-on" style="padding-top: 2px; padding-bottom: 2px;border-radius: 0 4px 4px 0;"><i style="cursor:pointer;" class="icon-user '+(this.readOnly?"":" userPickerBtn")+'"></i></span>';c+="<span "+(this.readOnly?"":'class="userselectionAdd"')+' style="cursor: pointer;padding: 2px;font-size: 12px;">+</span>';c+="<span "+(this.readOnly?"":'class="userselectionRemove"')+' style="cursor: pointer;padding: 2px;font-size: 12px;">-</span>';e+=c;UserSelection_new_inner_html=c}e+="</div>";if(this.value){e="";for(var d in this.value){var h=this.value[d];e+=this.loopItem(h)}}a.innerHTML=e};xf.field.UserSelection.prototype.loopItem=function(e){var d;var f;if(e[0].innerName.indexOf("@0")>0){d=e[0].value}else{d=e[1].value}if(e[1].innerName.indexOf("@1")>0){f=e[1].value}else{f=e[0].value}var b='<div class="xf-handler" style="margin:10px 0px">';if(xf_f_flow_view){b+=d+":"+f}else{b+='<select class="easyui-combobox userSelectionCom" style="width:135px" name="'+this.name+"-"+xf_f_name_prefix+'us_r-@0" ';if(this.rolesArr&&this.rolesArr.length>0){for(var a=0;a<this.rolesArr.length;a++){var c=this.rolesArr[a];b+='<option value="'+c.name+'" '+(d==c.name?"selected":"")+">"+c.name+"</option>"}}b+="</select>";b+='<input class="easyui-textbox" type="text" name="'+e[1].innerName+'" '+(this.readOnly?'readOnly="" ':"")+"required="+this.required+' class="userPicker" value="'+(f?f:"")+'" style="margin-bottom:0px;cursor:move;">';b+='<span class="add-on" style="padding-top: 2px; padding-bottom: 2px;border-radius: 0 4px 4px 0;"><i style="cursor:pointer;" class="icon-user '+(this.readOnly?"":" userPickerBtn")+'"></i></span>'}b+="</div>";return b};xf.field.UserSelection.prototype.updateAlias=function(a){this.alias=a};xf.field.UserSelection.prototype.updateRequired=function(a){this.required=a};xf.field.UserSelection.prototype.updateReadOnly=function(a){this.readOnly=a;this.display()};xf.field.UserSelection.prototype.updateReportFlag=function(a){this.reportFlag=a};xf.field.UserSelection.prototype.setValue=function(b){this.value=b;this.updateName(this.name);if(this.readOnly){var a=xf.$(this.parentId);if(!a){return false}a.innerHTML=b}};xf.field.ProSelection=function(a){if(!a){return}var c=a.id;var b=c.split("-");this.parentId=c;this.row=b[3];this.col=b[4];this.name="proselection-"+this.row+"-"+this.col;this.items="";this.required=false;this.readOnly=false;this.reportFlag=false;this.alias=this.name;this.dic="";this.dicsArr=[]};xf.field.ProSelection.prototype.render=function(){this.updateName(this.name)};xf.field.ProSelection.prototype.doExport=function(){return'{"type":"proselection","row":'+this.row+',"col":'+this.col+',"name":"'+xf_f_name_prefix+this.name+'","alias":"'+this.alias+'","items":"'+this.items+'","dic":"'+this.dic+'","required":'+this.required+',"readOnly":'+this.readOnly+',"reportFlag":'+this.reportFlag+"}"};xf.field.ProSelection.prototype.viewForm=function(a){a.innerHTML="";xf.createField(xf.field.attrName(),this.name,this.updateName,this,a);xf.createField(xf.field.attrAlias(),this.alias,this.updateAlias,this,a);xf.createBooleanField(xf.field.attrRequired(),this.required,this.updateRequired,this,a);xf.createBooleanField(xf.field.attrReadOnly(),this.readOnly,this.updateReadOnly,this,a);xf.createBooleanField(xf.field.attrReportFlag(),this.reportFlag,this.updateReportFlag,this,a)};xf.field.ProSelection.prototype.updateName=function(a){this.name=a;this.updateItems(this.items)};xf.field.ProSelection.prototype.updateDic=function(b){if(b){this.name=b;this.alias=b}this.dic=b;if(arguments.length>1){var a=arguments[1];this.viewForm(a)}};xf.field.ProSelection.prototype.updateItems=function(c){this.items=c;var a=xf.$(this.parentId);if(!a){return false}var b='<div class="xf-handler">';if(xf_f_flow_view){b+=(this.value?this.value:"")}else{b+='<select class="easyui-combobox xf-proselection" style="width:135px" name="'+this.name+"\" data-options=\"url:'formTemplate!listProjects.do',method:'get',valueField:'value',textField:'name',panelHeight:'auto',panelWidth:'auto',editable:false\""+(this.required?"required ":"")+(this.readOnly?"disabled":"")+"></select>"}b+="</div>";a.innerHTML=b};xf.field.ProSelection.prototype.updateAlias=function(a){this.alias=a};xf.field.ProSelection.prototype.updateRequired=function(a){this.required=a};xf.field.ProSelection.prototype.updateReadOnly=function(a){this.readOnly=a;this.updateItems(this.items)};xf.field.ProSelection.prototype.updateReportFlag=function(a){this.reportFlag=a};xf.field.ProSelection.prototype.setValue=function(b){this.value=b;this.updateName(this.name);if(this.readOnly){var a=xf.$(this.parentId);if(!a){return false}a.innerHTML=b}};
