$(function(){$(".upperDigit").each(function(){var b=$(this);var e=$(this).attr("resources");var a=new RegExp("#\\w+#","g");b.textbox("setValue","\u96f6\u5143\u6574");var d=e.match(a);if(d!=null&&d!="null"&&d.length>0){var c=d[0];var f=c.substring(1,c.length-1);$("#xf_f_"+f).textbox({onChange:function(){var g=upDigit($(this).val());b.textbox("setValue",g)}})}});$(".calculator").each(function(){var a=this.id;var h=$(this);var b=$(this).attr("resources");if(!b){return false}h.textbox("setValue",replacePattern(h,b));var g=new RegExp("#\\w+#","g");var c=b.match(g);for(var i in c){var e=c[i];var f=new RegExp(e);var d=e.substring(1,e.length-1);$("#xf_f_"+d).textbox({onChange:function(){var j={};j[this.id]=$(this).val();h.textbox("setValue",replacePattern(h,b,j))}});if(h.hasClass("easyui-numberbox")){}}})});function replacePattern(f,b,d){if(!b){return false}var j=new RegExp("#\\w+#","g");var c=b.match(j);for(var l in c){var h=c[l];var i=new RegExp(h);var a=h.substring(1,h.length-1);if(d&&d["xf_f_"+a]){b=b.replace(i,d["xf_f_"+a])}else{var k=$("#xf_f_"+a).val();var g=f.hasClass("easyui-numberbox")?0:"";b=b.replace(i,k?k:g)}}var e;if(f.hasClass("easyui-numberbox")){e=calcArith(b)}else{e=b.split("+").join("")}return e}function upDigit(b){var h=["\u89d2","\u5206"];var e=["\u96f6","\u58f9","\u8d30","\u53c1","\u8086","\u4f0d","\u9646","\u67d2","\u634c","\u7396"];var g=[["\u5143","\u4e07","\u4ebf"],["","\u62fe","\u4f70","\u4edf"]];var f=b<0?"\u6b20":"";b=Math.abs(b);var k="";for(var d=0;d<h.length;d++){k+=(e[Math.floor(b*10*Math.pow(10,d))%10]+h[d]).replace(/\u96f6./,"")}k=k||"\u6574";b=Math.floor(b);for(var d=0;d<g[0].length&&b>0;d++){var a="";for(var c=0;c<g[1].length&&b>0;c++){a=e[b%10]+g[1][c]+a;b=Math.floor(b/10)}k=a.replace(/(\u96f6.)*\u96f6$/,"").replace(/^$/,"\u96f6")+g[0][d]+k}return f+k.replace(/(\u96f6.)*\u96f6\u5143/,"\u5143").replace(/(\u96f6.)+/g,"\u96f6").replace(/^\u6574$/,"\u96f6\u5143\u6574")}function calcArith(a){return exA(a)}function exA(a){var d=0;if(a==""){return d}if(a.indexOf("+")>0){var c=a.split("+");d=exP(c[0]);for(var b=1;b<c.length;b++){d=accAdd(d,exP(c[b]))}}else{d=exP(a)}return d}function exP(a){var d=0;if(a==""){return d}if(a.indexOf("-")>0){var c=a.split("-");d=exX(c[0]);for(var b=1;b<c.length;b++){d=accSub(d,exX(c[b]))}}else{d=exX(a)}return d}function exX(a){var d=0;if(a==""){return d}if(a.indexOf("*")>0){var c=a.split("*");d=exX(c[0]);for(var b=1;b<c.length;b++){d=accMul(d,exC(c[b]))}}else{d=exC(a)}return d}function exC(a){var d=1;if(a==""){return d}if(a.indexOf("/")>0){var c=a.split("/");d=exX(c[0]);for(var b=1;b<c.length;b++){d=accDiv(d,parseFloat(c[b]))}}else{d=parseFloat(a)}return d}function accAdd(f,d){var c,b,a;try{c=f.toString().split(".")[1].length}catch(g){c=0}try{b=d.toString().split(".")[1].length}catch(g){b=0}a=Math.pow(10,Math.max(c,b));return(parseInt(f*a)+parseInt(d*a))/a}function accSub(b,a){return accAdd(b,-a)}function accMul(d,b){var a=0,f=d.toString(),c=b.toString();try{a+=f.split(".")[1].length}catch(g){}try{a+=c.split(".")[1].length}catch(g){}return Number(f.replace(".",""))*Number(c.replace(".",""))/Math.pow(10,a)}function accDiv(arg1,arg2){var t1=0,t2=0,r1,r2;try{t1=arg1.toString().split(".")[1].length}catch(e){}try{t2=arg2.toString().split(".")[1].length}catch(e){}with(Math){r1=Number(arg1.toString().replace(".",""));r2=Number(arg2.toString().replace(".",""));return(r1/r2)*pow(10,t2-t1)}};
